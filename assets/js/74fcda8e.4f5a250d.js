"use strict";(self.webpackChunkreact_map_gl_website=self.webpackChunkreact_map_gl_website||[]).push([[7799],{3905:(e,t,a)=>{a.d(t,{Zo:()=>m,kt:()=>g});var n=a(7294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function l(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function i(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var s=n.createContext({}),p=function(e){var t=n.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):l(l({},t),e)),a},m=function(e){var t=p(e.components);return n.createElement(s.Provider,{value:t},e.children)},c="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},d=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,o=e.originalType,s=e.parentName,m=i(e,["components","mdxType","originalType","parentName"]),c=p(a),d=r,g=c["".concat(s,".").concat(d)]||c[d]||u[d]||o;return a?n.createElement(g,l(l({ref:t},m),{},{components:a})):n.createElement(g,l({ref:t},m))}));function g(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=a.length,l=new Array(o);l[0]=d;var i={};for(var s in t)hasOwnProperty.call(t,s)&&(i[s]=t[s]);i.originalType=e,i[c]="string"==typeof e?e:r,l[1]=i;for(var p=2;p<o;p++)l[p]=a[p];return n.createElement.apply(null,l)}return n.createElement.apply(null,a)}d.displayName="MDXCreateElement"},3732:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>m,contentTitle:()=>s,default:()=>g,frontMatter:()=>i,metadata:()=>p,toc:()=>c});var n=a(7462),r=a(3366),o=(a(7294),a(3905)),l=["components"],i={},s="State Management",p={unversionedId:"get-started/state-management",id:"get-started/state-management",title:"State Management",description:"There are two ways to use a Map:",source:"@site/../docs/get-started/state-management.md",sourceDirName:"get-started",slug:"/get-started/state-management",permalink:"/react-map-gl/docs/get-started/state-management",draft:!1,editUrl:"https://github.com/visgl/deck.gl/tree/master/website/../docs/get-started/state-management.md",tags:[],version:"current",frontMatter:{},sidebar:"docsSidebar",previous:{title:"About Mapbox Tokens",permalink:"/react-map-gl/docs/get-started/mapbox-tokens"},next:{title:"Adding Custom Data",permalink:"/react-map-gl/docs/get-started/adding-custom-data"}},m={},c=[{value:"Uncontrolled Map",id:"uncontrolled-map",level:2},{value:"Controlled Map",id:"controlled-map",level:2},{value:"Custom Camera Constraints",id:"custom-camera-constraints",level:2}],u={toc:c},d="wrapper";function g(e){var t=e.components,a=(0,r.Z)(e,l);return(0,o.kt)(d,(0,n.Z)({},u,a,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"state-management"},"State Management"),(0,o.kt)("p",null,"There are two ways to use a ",(0,o.kt)("a",{parentName:"p",href:"/react-map-gl/docs/api-reference/map"},"Map"),":"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://reactjs.org/docs/uncontrolled-components.html"},"Uncontrolled"),": The application sets the initial view state (Camera options) when the map is mounted, and the component automatically makes changes to the view states afterwards. This mode works very similarly to the mapbox-gl ",(0,o.kt)("inlineCode",{parentName:"li"},"Map")," class."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://reactjs.org/docs/forms.html#controlled-components"},"Controlled"),": The application manages the view state, and pass it to the map via props. The map invokes a callback with a new view state during user interaction transition, and the application can decide what to do with it. This mode is the most powerful when an application has other components that need to interact with the map, or implements its own user input and data handling logic.")),(0,o.kt)("h2",{id:"uncontrolled-map"},"Uncontrolled Map"),(0,o.kt)("p",null,"You may clone a full app configuration for this example ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/visgl/react-map-gl/tree/7.1-release/examples/get-started/basic"},"here"),"."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-tsx"},"import * as React from 'react';\nimport Map from 'react-map-gl';\n\nfunction App() {\n  return <Map\n    initialViewState={{\n      longitude: -100,\n      latitude: 40,\n      zoom: 3.5\n    }}\n    mapStyle=\"mapbox://styles/mapbox/streets-v9\"\n  />;\n}\n")),(0,o.kt)("h2",{id:"controlled-map"},"Controlled Map"),(0,o.kt)("p",null,"You may clone a full app configuration for this example ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/visgl/react-map-gl/tree/7.1-release/examples/get-started/controlled"},"here"),"."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-tsx"},"import * as React from 'react';\nimport Map from 'react-map-gl';\n\nfunction App() {\n  const [viewState, setViewState] = React.useState({\n    longitude: -100,\n    latitude: 40,\n    zoom: 3.5\n  });\n\n  return <Map\n    {...viewState}\n    onMove={evt => setViewState(evt.viewState)}\n    mapStyle=\"mapbox://styles/mapbox/streets-v9\"\n  />;\n}\n")),(0,o.kt)("p",null,"A real-world application likely uses more complicated state flows:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Using map with a state store (Redux) ",(0,o.kt)("a",{parentName:"li",href:"https://github.com/visgl/react-map-gl/tree/7.1-release/examples/get-started/redux"},"example")),(0,o.kt)("li",{parentName:"ul"},"Using map with SSR (Next.js) ",(0,o.kt)("a",{parentName:"li",href:"https://github.com/visgl/react-map-gl/tree/7.1-release/examples/get-started/nextjs"},"example"))),(0,o.kt)("h2",{id:"custom-camera-constraints"},"Custom Camera Constraints"),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"Map")," offers props that set basic constraints for the camera, e.g. ",(0,o.kt)("inlineCode",{parentName:"p"},"maxBounds"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"minZoom"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"maxPitch"),". If you need more complicated logic to constrain the camera, you may use it as a controlled component. The following example restricts the map center inside a GeoJSON geofence:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-tsx"},"import * as React from 'react';\nimport Map from 'react-map-gl';\n\n// npm install @turf/turf\nimport * as turf from '@turf/turf';\n\n// A circle of 5 mile radius of the Empire State Building\nconst GEOFENCE = turf.circle([-74.0122106, 40.7467898], 5, {units: 'miles'});\n\nfunction App() {\n  const [viewState, setViewState] = React.useState({\n    longitude: -100,\n    latitude: 40,\n    zoom: 3.5\n  });\n\n  const onMove = React.useCallback(({viewState}) => {\n    const newCenter = [viewState.longitude, viewState.latitude];\n    // Only update the view state if the center is inside the geofence\n    if (turf.booleanPointInPolygon(newCenter, GEOFENCE)) {\n      setViewState(newCenter);\n    }\n  }, [])\n\n  return <Map\n    {...viewState}\n    onMove={onMove}\n    mapStyle=\"mapbox://styles/mapbox/streets-v9\"\n  />;\n}\n")))}g.isMDXComponent=!0}}]);